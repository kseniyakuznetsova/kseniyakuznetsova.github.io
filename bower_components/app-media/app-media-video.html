<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"></head><body><dom-module id="app-media-video"><template><style>:host{display:flex;align-items:center;justify-content:center;flex-wrap:nowrap;width:100%;height:100%;background:var(--app-media-video-background, #000);overflow:hidden;}video{flex:0 0 auto;transform-origin:center center;position:relative;will-change:transform;}</style><video id="videoElement" on-loadedmetadata="_updateMetrics" muted="[[muted]]" autoplay="[[autoplay]]" loop="[[loop]]" webkit-playsinline="" playsinline=""></video></template><script>(function(){Polymer({is:'app-media-video',behaviors:[Polymer.IronResizableBehavior],properties:{source:{type:Object,notify:!0,observer:'_sourceChanged'},contain:{type:Boolean,value:!1},mirror:{type:Boolean,value:!1},muted:{type:Boolean,value:!1},autoplay:{type:Boolean,value:!1},loop:{type:Boolean,value:!1},videoElement:{type:Object,notify:!0,readOnly:!0},sourceRect:{type:Object,notify:!0,readOnly:!0,value:function(){return{top:0,left:0,width:0,height:0}}},viewportRect:{type:Object,notify:!0,readOnly:!0}},listeners:{"videoElement.loadedmetadata":'_updateMetrics',"iron-resize":'_updateMetrics'},observers:['_updateMetrics(contain, mirror)'],attached:function(){this._setVideoElement(this.$.videoElement),this._updateMetrics()},play:function(){this.$.videoElement.play()},pause:function(){this.$.videoElement.pause()},_sourceChanged:function(){var a=this.$.videoElement.src,b=this.$.videoElement.paused;if('string'===typeof this.source)this.$.videoElement.src=this.source;else try{this.$.videoElement.srcObject=this.source}catch(a){this.source instanceof Blob?this.$.videoElement.src=URL.createObjectURL(this.source):this._error(this._logf(a))}if('string'===typeof a)try{URL.revokeObjectURL(a)}catch(a){}!b&&this.$.videoElement.paused&&this.play()},_updateMetrics:function(){this.debounce('_updateMetrics',function(){var a=this.$.videoElement.videoWidth,b=this.$.videoElement.videoHeight;if(!a||!b)return void(this.$.videoElement.style.visibility='hidden');this.$.videoElement.style.visibility='';this.$.videoElement.style.transform='';var c,d=this.$.videoElement.getBoundingClientRect(),e=this.getBoundingClientRect(),f=e.width/e.height,g=a/b,h=this.contain?g<f:g>f,i=a/d.width;c=h?e.height/d.height:e.width/d.width,this._setViewportRect(e);var j=e.width/c,k=e.height/c,l=(d.width-j)*i,m=(d.height-k)*i;this._setSourceRect({left:l/2,top:m/2,width:j*i,height:k*i}),this.$.videoElement.style.transform='scale('+(this.mirror?-c:c)+','+c+')'})}})})();</script></dom-module></body></html>