<html><head><link rel="import" href="../polymer/polymer.html"></head><body><dom-module id="app-media-devices"><script>(function(){Polymer({is:'app-media-devices',properties:{kind:{type:String,value:''},devices:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},selectedDevice:{type:Object,readOnly:!0,notify:!0},selectedDeviceIndex:{type:Number,readOnly:!0,notify:!0,value:0}},observers:['_updateDevices(kind)','_updateSelectedDevice(devices, selectedDeviceIndex)'],selectNextDevice:function(){var a=this.selectedDeviceIndex+1;null!=this.devices&&a<this.devices.length?this._setSelectedDeviceIndex(a):this._setSelectedDeviceIndex(0)},selectPreviousDevice:function(){var a=this.selectedDeviceIndex-1,b=this.devices&&0<this.devices.length?this.devices.length-1:0;null!=this.devices&&a<this.devices.length&&-1<a?this._setSelectedDeviceIndex(a):this._setSelectedDeviceIndex(b)},selectDevice:function(a){var b=this.devices.indexOf(a);if(-1===b)throw new Error('app-media-devices: The given object is not a known device.');this._setSelectedDeviceIndex(b)},_updateSelectedDevice:function(){this.debounce('_updateSelectedDevice',function(){null!=this.devices&&null!=this.selectedDeviceIndex&&this._setSelectedDevice(this.devices[this.selectedDeviceIndex])})},_updateDevices:function(a){try{var b=new RegExp(null==a?'':a,'i'),c=this;navigator.mediaDevices.enumerateDevices().then(function(a){var d=a.filter(function(a){return b.test(a.kind)});c._setSelectedDeviceIndex(0),c._setDevices(d)})}catch(a){this._error(this._logf('Failed to look up media devices.',a))}}})})();</script></dom-module></body></html>