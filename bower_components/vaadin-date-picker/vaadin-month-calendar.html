<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../polymer/lib/elements/dom-repeat.html"><link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html"><link rel="import" href="vaadin-date-picker-helper.html"><link rel="import" href="../vaadin-themable-mixin/vaadin-themable-mixin.html"><link rel="import" href="vaadin-date-picker-styles.html"></head><body><dom-module id="vaadin-month-calendar"><template><style>:host{display:block;}[part="weekdays"],
      #days{display:flex;flex-wrap:wrap;flex-grow:1;}#days-container,
      #weekdays-container{display:flex;}[part="week-numbers"]{display:flex;flex-direction:column;justify-content:space-between;flex-shrink:0;}[part="week-numbers"][hidden],
      [part="weekday"][hidden]{display:none;}[part="weekday"],
      [part="date"]{width:14.285714286%;}[part="weekday"]:empty,
      [part="week-numbers"]{width:12.5%;flex-shrink:0;}</style><div part="month-header" role="heading">[[_getTitle(month, i18n.monthNames)]]</div><div id="monthGrid" on-tap="_handleTap" on-touchend="_preventDefault" on-touchstart="_onMonthGridTouchStart"><div id="weekdays-container"><div hidden="[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]" part="weekday"></div><div part="weekdays"><template is="dom-repeat" items="[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]"><div part="weekday" role="heading" aria-label$="[[item.weekDay]]">[[item.weekDayShort]]</div></template></div></div><div id="days-container"><div part="week-numbers" hidden="[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]"><template is="dom-repeat" items="[[_getWeekNumbers(_days)]]"><div part="week-number" role="heading" aria-label$="[[i18n.week]] [[item]]">[[item]]</div></template></div><div id="days"><template is="dom-repeat" items="[[_days]]"><div part="date" today$="[[_isToday(item)]]" selected$="[[_dateEquals(item, selectedDate)]]" focused$="[[_dateEquals(item, focusedDate)]]" date="[[item]]" disabled$="[[!_dateAllowed(item, minDate, maxDate)]]" role$="[[_getRole(item)]]" aria-label$="[[_getAriaLabel(item)]]" aria-disabled$="[[_getAriaDisabled(item, minDate, maxDate)]]">[[_getDate(item)]]</div></template></div></div></div></template><script>{class a extends Vaadin.ThemableMixin(Polymer.GestureEventListeners(Polymer.Element)){static get is(){return'vaadin-month-calendar'}static get properties(){return{month:{type:Date,value:new Date},selectedDate:{type:Date,notify:!0},focusedDate:Date,showWeekNumbers:{type:Boolean,value:!1},i18n:{type:Object},ignoreTaps:Boolean,_notTapping:Boolean,minDate:{type:Date,value:null},maxDate:{type:Date,value:null},_days:{type:Array,computed:'_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'},disabled:{type:Boolean,reflectToAttribute:!0,computed:'_isDisabled(month, minDate, maxDate)'}}}static get observers(){return['_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)']}_dateEquals(a,b){return Vaadin.DatePickerHelper._dateEquals(a,b)}_dateAllowed(a,b,c){return Vaadin.DatePickerHelper._dateAllowed(a,b,c)}_isDisabled(a,b,c){var d=new Date(0,0);d.setFullYear(a.getFullYear()),d.setMonth(a.getMonth()),d.setDate(1);var e=new Date(0,0);return e.setFullYear(a.getFullYear()),e.setMonth(a.getMonth()+1),e.setDate(-1),!this._dateAllowed(d,b,c)&&!this._dateAllowed(e,b,c)}_getTitle(a,b){return void 0===a||void 0===b?void 0:this.i18n.formatTitle(b[a.getMonth()],a.getFullYear())}_onMonthGridTouchStart(){this._notTapping=!1,setTimeout(()=>this._notTapping=!0,300)}_dateAdd(a,b){a.setDate(a.getDate()+b)}_applyFirstDayOfWeek(a,b){return void 0===a||void 0===b?void 0:a.slice(b).concat(a.slice(0,b))}_getWeekDayNames(a,b,c,d){if(void 0!==a&&void 0!==b&&void 0!==c&&void 0!==d)return a=this._applyFirstDayOfWeek(a,d),b=this._applyFirstDayOfWeek(b,d),a=a.map((a,c)=>({weekDay:a,weekDayShort:b[c]})),a}_getDate(a){return a?a.getDate():''}_showWeekNumbersChanged(a,b){a&&1===b?this.setAttribute('week-numbers',''):this.removeAttribute('week-numbers')}_showWeekSeparator(a,b){return a&&1===b}_isToday(a){return this._dateEquals(new Date,a)}_getDays(a,b){if(void 0!==a&&void 0!==b){var c=new Date(0,0);for(c.setFullYear(a.getFullYear()),c.setMonth(a.getMonth()),c.setDate(1);c.getDay()!==b;)this._dateAdd(c,-1);for(var d=[],e=c.getMonth(),f=a.getMonth();c.getMonth()===f||c.getMonth()===e;)d.push(c.getMonth()===f?new Date(c.getTime()):null),this._dateAdd(c,1);return d}}_getWeekNumber(a,b){if(void 0!==a&&void 0!==b)return a||(a=b.reduce((a,b)=>!a&&b?b:a)),Vaadin.DatePickerHelper._getISOWeekNumber(a)}_getWeekNumbers(a){return a.map((b)=>this._getWeekNumber(b,a)).filter((a,b,c)=>c.indexOf(a)===b)}_handleTap(a){this.ignoreTaps||this._notTapping||!a.target.date||a.target.hasAttribute('disabled')||(this.selectedDate=a.target.date,this.dispatchEvent(new CustomEvent('date-tap',{bubbles:!0,composed:!0})))}_preventDefault(a){a.preventDefault()}_getRole(a){return a?'button':'presentational'}_getAriaLabel(a){if(!a)return'';var b=this._getDate(a)+' '+this.i18n.monthNames[a.getMonth()]+' '+a.getFullYear()+', '+this.i18n.weekdays[a.getDay()];return this._isToday(a)&&(b+=', '+this.i18n.today),b}_getAriaDisabled(a,b,c){return void 0===a||void 0===b||void 0===c?void 0:this._dateAllowed(a,b,c)?'false':'true'}}customElements.define(a.is,a),window.Vaadin=window.Vaadin||{},Vaadin.MonthCalendarElement=a}</script></dom-module></body></html>