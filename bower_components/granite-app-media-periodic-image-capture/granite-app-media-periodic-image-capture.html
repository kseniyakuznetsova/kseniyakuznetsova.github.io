<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../app-media/app-media-image-capture.html"><script>class GraniteAppMediaPeriodicImageCapture extends window.customElements.get('app-media-image-capture'){static get is(){return'granite-app-media-periodic-image-capture'}static get properties(){return{frequency:{type:Number,value:10,observer:'_onFrequencyChange'},capture:{type:Boolean,value:!1,observer:'_onCaptureChange'},debug:{type:Boolean,value:!1},_timeoutId:{type:Number,value:0}}}_onFrequencyChange(){(1e-3>this.frequency||100<this.frequency)&&(console.error('Frequency must be between 0.001 and 100 images per second'),this.frequency=10),this.debug&&console.log('[granite-app-media-periodic-image-capture] _onFrequencyChange',this.capture,this.frequency),this.capture&&(this._stopCapture(),this._startCapture())}_onCaptureChange(){return this.debug&&console.log('[granite-app-media-periodic-image-capture] _onCaptureChange',this.capture,this.frequency),this.capture?void this._startCapture():void this._stopCapture()}_doCapture(){this.takePhoto(),this.debug&&console.log('[granite-app-media-periodic-image-capture] _doCapture period',1e3/this.frequency),this._timeoutId=setTimeout(()=>{this.debug&&console.log('[granite-app-media-periodic-image-capture] _doCapture - capturing'),this._doCapture()},1e3/this.frequency),console.log('timeoutId',this._timeoutId)}_startCapture(){this.debug&&console.log('[granite-app-media-periodic-image-capture] _startCapture'),this._timeoutId||this._doCapture()}_stopCapture(){this.debug&&console.log('[granite-app-media-periodic-image-capture] _stopCapture'),this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}}window.customElements.define(GraniteAppMediaPeriodicImageCapture.is,GraniteAppMediaPeriodicImageCapture);</script></head><body></body></html>